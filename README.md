# è‡ºè‚¡è³‡æ–™ç²å–èˆ‡åˆ†æå·¥å…·

ä¸€å€‹å®Œæ•´çš„è‡ºè‚¡è³‡æ–™ç®¡ç†ç³»çµ±ï¼Œæä¾›**æ­·å²è³‡æ–™ç²å–**ã€**ä¸‰å¹´æ–°é«˜æª¢æŸ¥**åŠ **Line å³æ™‚é€šçŸ¥**åŠŸèƒ½ã€‚

## åŠŸèƒ½ç‰¹è‰²

### ğŸ“Š è‚¡ç¥¨è³‡æ–™ç²å–
- âœ… **å¢é‡æ›´æ–°**: æ¯æ¬¡åŸ·è¡Œè‡ªå‹•å¾€å‰è£œå……æ­·å²è³‡æ–™
- âœ… **æ™ºæ…§çºŒå‚³**: ä¸­æ–·å¾Œå†æ¬¡åŸ·è¡Œæœƒå¾ä¸Šæ¬¡é€²åº¦ç¹¼çºŒ
- âœ… **è³‡æ–™å®Œæ•´**: æ¶µè“‹æ‰€æœ‰ä¸Šå¸‚è‚¡ç¥¨ï¼ˆç´„ 1200+ æ”¯ï¼‰
- âœ… **æ ¼å¼æ¨™æº–**: CSV æ ¼å¼ï¼ŒåŒ…å« OHLCV è³‡æ–™
- âœ… **è‡ªå‹•å»é‡**: åˆä½µè³‡æ–™æ™‚è‡ªå‹•å»é™¤é‡è¤‡è¨˜éŒ„
- âœ… **è‚¡ç¥¨åˆ—è¡¨å¿«å–**: ä¸€å¤©åªå¾ API æŠ“å–ä¸€æ¬¡è‚¡ç¥¨åˆ—è¡¨ï¼Œæ¸›å°‘è«‹æ±‚

### ğŸš€ ä¸‰å¹´æ–°é«˜æª¢æŸ¥
- âœ… **è‡ªå‹•æª¢æ¸¬**: æ¯å¤©è‡ªå‹•æª¢æŸ¥è‚¡ç¥¨æ˜¯å¦å‰µä¸‰å¹´æ–°é«˜
- âœ… **Line é€šçŸ¥**: ç™¼ç¾æ–°é«˜ç«‹å³æ¨é€ Line è¨Šæ¯
- âœ… **è©³ç´°è³‡è¨Š**: é¡¯ç¤ºè‚¡ç¥¨ä»£è™Ÿã€åç¨±ã€æ–°é«˜åƒ¹ã€å‰é«˜åƒ¹èˆ‡æ—¥æœŸ
- âœ… **å®šæ™‚åŸ·è¡Œ**: æ¯å¤©æ”¶ç›¤å¾Œè‡ªå‹•åŸ·è¡Œï¼ˆä¸‹åˆ 3:30ï¼‰

### ğŸ” è³‡æ–™å®Œæ•´æ€§
- âœ… **å®Œæ•´æ€§æª¢æŸ¥**: è‡ªå‹•åˆ†æç¼ºå¤±çš„è³‡æ–™ä¸¦ç”¢ç”Ÿè©³ç´°å ±å‘Š
- âœ… **æ™ºæ…§è£œé½Š**: è‡ªå‹•è£œé½Šç¼ºå¤±çš„è³‡æ–™ï¼Œæ™ºèƒ½åˆä½µæ—¥æœŸå€é–“

## å¿«é€Ÿé–‹å§‹

### 1. å»ºç«‹è™›æ“¬ç’°å¢ƒï¼ˆæ¨è–¦ï¼‰

```bash
python3 -m venv venv
source venv/bin/activate  # Linux/macOS
```

### 2. å®‰è£ä¾è³´

```bash
pip install -r requirements.txt
pip install tqdm  # FinMind çš„é¡å¤–ä¾è³´
```

### 3. è¨­å®šç’°å¢ƒè®Šæ•¸

å»ºç«‹ `.env` æª”æ¡ˆï¼š

```env
# FinMind API Tokenï¼ˆå¯é¸ï¼Œä½†å¼·çƒˆå»ºè­°ï¼‰
FINMIND_API_TOKEN=your_token_here

# Line Messaging APIï¼ˆç”¨æ–¼æ–°é«˜é€šçŸ¥ï¼‰
LINE_CHANNEL_ACCESS_TOKEN=your_line_token_here
LINE_USER_ID=your_line_user_id_here
```

**Line Token å–å¾—æ–¹å¼**:
1. å‰å¾€ [Line Developers Console](https://developers.line.biz/)
2. å»ºç«‹ Messaging API Channel
3. å–å¾— Channel Access Token å’Œ User ID

### 4. åŸ·è¡Œç¨‹å¼

#### ğŸ“Š è‚¡ç¥¨è³‡æ–™ç²å–
```bash
# ä½¿ç”¨è™›æ“¬ç’°å¢ƒ
./venv/bin/python3 scripts/fetch_latest_stock_prices.py

# æˆ–è€…ç›´æ¥åŸ·è¡Œ
python scripts/fetch_latest_stock_prices.py
```

**é¦–æ¬¡åŸ·è¡Œ**: ç²å–æœ€è¿‘ 1 å¹´çš„è³‡æ–™
**å¾ŒçºŒåŸ·è¡Œ**: æ¯æ¬¡å¾€å‰è£œå…… 1 å¹´ï¼Œç›´åˆ° 2000-01-01

#### ğŸš€ ä¸‰å¹´æ–°é«˜æª¢æŸ¥
```bash
# æª¢æŸ¥ä¸¦ç™¼é€ Line é€šçŸ¥
./venv/bin/python3 scripts/check_new_high.py
```

**åŠŸèƒ½**: æª¢æŸ¥æœ€æ–°æ—¥æœŸçš„è‚¡åƒ¹æ˜¯å¦ç‚ºè¿‘ä¸‰å¹´æ–°é«˜ï¼Œä¸¦é€é Line é€šçŸ¥

### 5. æª¢æŸ¥è³‡æ–™å®Œæ•´æ€§

```bash
# æª¢æŸ¥ç¼ºå¤±è³‡æ–™ï¼ˆä¸è£œé½Šï¼‰
./venv/bin/python3 scripts/check_missing_data.py --check-only

# è‡ªå‹•è£œé½Šæ‰€æœ‰ç¼ºå¤±è³‡æ–™
./venv/bin/python3 scripts/check_missing_data.py

# æ¸¬è©¦æ¨¡å¼ï¼ˆåªè£œé½Šå‰10æ”¯è‚¡ç¥¨ï¼‰
./venv/bin/python3 scripts/check_missing_data.py --max-stocks 10
```

### 6. ç­‰å¾…å®Œæˆ

- é è¨ˆæ¯æ¬¡åŸ·è¡Œ 10-30 åˆ†é˜ï¼ˆå–æ±ºæ–¼ç¶²è·¯é€Ÿåº¦ï¼‰
- å¯éš¨æ™‚æŒ‰ `Ctrl+C` ä¸­æ–·ï¼Œä¸‹æ¬¡æœƒè‡ªå‹•çºŒå‚³
- è³‡æ–™å„²å­˜åœ¨ `data/taiwan_stocks.csv`

## Linux è‡ªå‹•åŒ–éƒ¨ç½²ï¼ˆæ¨è–¦ï¼‰

åœ¨ Linux ä¼ºæœå™¨ä¸Šè¨­å®šè‡ªå‹•å®šæ™‚ä»»å‹™ï¼Œè‡ªå‹•ç²å–è‚¡ç¥¨è³‡æ–™ä¸¦æª¢æŸ¥æ–°é«˜ã€‚

### ä¸€éµå®‰è£

```bash
# ä¸‹è¼‰å°ˆæ¡ˆ
git clone <your-repo-url>
cd stock-strategy

# åŸ·è¡Œå®‰è£è…³æœ¬ï¼ˆéœ€è¦ root æ¬Šé™ï¼‰
sudo bash services/install_service.sh
```

### å®‰è£å¾Œæœƒè‡ªå‹•å»ºç«‹å…©å€‹æœå‹™

#### ğŸ“Š è‚¡ç¥¨è³‡æ–™ç²å–æœå‹™
- **Service**: `stock-fetcher.service`
- **Timer**: `stock-fetcher.timer`
- **åŸ·è¡Œé »ç‡**: æ¯å°æ™‚ä¸€æ¬¡
- **æ—¥èªŒæª”æ¡ˆ**: `/var/log/stock-fetcher.log`
- **åŠŸèƒ½**: è‡ªå‹•ç²å–ä¸¦æ›´æ–°è‚¡ç¥¨è³‡æ–™

#### ğŸš€ ä¸‰å¹´æ–°é«˜æª¢æŸ¥æœå‹™
- **Service**: `check-new-high.service`
- **Timer**: `check-new-high.timer`
- **åŸ·è¡Œé »ç‡**: æ¯å¤©ä¸‹åˆ 3:30ï¼ˆæ”¶ç›¤å¾Œï¼‰
- **æ—¥èªŒæª”æ¡ˆ**: `/var/log/check-new-high.log`
- **åŠŸèƒ½**: æª¢æŸ¥æ–°é«˜ä¸¦ç™¼é€ Line é€šçŸ¥

### æœå‹™ç‰¹æ€§
- âœ… é–‹æ©Ÿè‡ªå‹•å•Ÿå‹•
- âœ… ä½¿ç”¨è™›æ“¬ç’°å¢ƒåŸ·è¡Œ
- âœ… æ—¥èªŒè¨˜éŒ„æ‰€æœ‰æ“ä½œ
- âœ… è‡ªå‹•è£œé½Šè³‡æ–™åˆ° 2000 å¹´
- âœ… Line å³æ™‚é€šçŸ¥

### ç®¡ç†å‘½ä»¤

#### æŸ¥çœ‹æœå‹™ç‹€æ…‹
```bash
# è‚¡ç¥¨è³‡æ–™ç²å–æœå‹™
sudo systemctl status stock-fetcher.timer

# ä¸‰å¹´æ–°é«˜æª¢æŸ¥æœå‹™
sudo systemctl status check-new-high.timer
```

#### æŸ¥çœ‹æ—¥èªŒ
```bash
# è‚¡ç¥¨è³‡æ–™ç²å–
sudo tail -f /var/log/stock-fetcher.log

# ä¸‰å¹´æ–°é«˜æª¢æŸ¥
sudo tail -f /var/log/check-new-high.log

# æŸ¥çœ‹åŸ·è¡Œæ­·å²
sudo journalctl -u stock-fetcher.service
sudo journalctl -u check-new-high.service
```

#### æ‰‹å‹•åŸ·è¡Œ
```bash
# æ‰‹å‹•åŸ·è¡Œè‚¡ç¥¨è³‡æ–™ç²å–
sudo systemctl start stock-fetcher.service

# æ‰‹å‹•åŸ·è¡Œæ–°é«˜æª¢æŸ¥
sudo systemctl start check-new-high.service
```

#### åœæ­¢/å•Ÿå‹•æœå‹™
```bash
# åœæ­¢æ‰€æœ‰ timers
sudo systemctl stop stock-fetcher.timer check-new-high.timer

# å•Ÿå‹•æ‰€æœ‰ timers
sudo systemctl start stock-fetcher.timer check-new-high.timer

# ç¦ç”¨æ‰€æœ‰ timersï¼ˆä¸é–‹æ©Ÿè‡ªå•Ÿï¼‰
sudo systemctl disable stock-fetcher.timer check-new-high.timer
```

### Line é€šçŸ¥ç¯„ä¾‹

#### ä¸‰å¹´æ–°é«˜é€šçŸ¥
ç•¶æœ‰è‚¡ç¥¨å‰µæ–°é«˜æ™‚ï¼Œæœƒæ”¶åˆ°é¡ä¼¼ä»¥ä¸‹çš„ Line è¨Šæ¯ï¼š

```
ğŸš€ å‰µ 3 å¹´æ–°é«˜é€šçŸ¥
ğŸ“… 2026-01-05 (å…± 11 æ”¯)

53 (å…ƒå¤§é›»å­): æ–°é«˜ $150.15 | å‰é«˜ $144.20 (2025-12-30)
2330 (å°ç©é›»): æ–°é«˜ $1695.00 | å‰é«˜ $1585.00 (2024-07-11)
2337 (æ—ºå®): æ–°é«˜ $47.65 | å‰é«˜ $43.35 (2025-04-21)
...
```

#### è³‡æ–™ç²å–å®Œæˆé€šçŸ¥
æ¯æ¬¡ç²å–è³‡æ–™å®Œæˆå¾Œï¼Œæœƒæ”¶åˆ°åŸ·è¡Œç‹€æ…‹å ±å‘Šï¼š

```
ã€è‚¡å¸‚è³‡æ–™ç²å–å ±å‘Š - your-serverã€‘

- åŸ·è¡Œç‹€æ…‹: âœ… åŸ·è¡ŒæˆåŠŸ
- æ–°å¢ç­†æ•¸: 12,345 ç­†
- åŸ·è¡Œè€—æ™‚: 123.45 ç§’
- è³‡æ–™åº«ç‹€æ…‹:
  - ç¸½ç­†æ•¸: 517,460
  - æ—¥æœŸç¯„åœ: 2021-01-11 ~ 2026-01-05
```

### å¸è¼‰æœå‹™

```bash
sudo bash services/uninstall_service.sh
```

## è³‡æ–™æ ¼å¼

### CSV æ¬„ä½èªªæ˜

| æ¬„ä½ | èªªæ˜ | é¡å‹ | ç¯„ä¾‹ |
|------|------|------|------|
| `date` | äº¤æ˜“æ—¥æœŸ | String | 2025-12-08 |
| `stock_id` | è‚¡ç¥¨ä»£ç¢¼ | String | 2330 |
| `open` | é–‹ç›¤åƒ¹ | Float | 1035.0 |
| `high` | æœ€é«˜åƒ¹ | Float | 1050.0 |
| `low` | æœ€ä½åƒ¹ | Float | 1032.0 |
| `close` | æ”¶ç›¤åƒ¹ | Float | 1048.0 |
| `volume` | æˆäº¤é‡ | Integer | 58234567 |

### ç¯„ä¾‹è³‡æ–™

```csv
date,stock_id,open,high,low,close,volume
2025-12-08,2330,1035.0,1050.0,1032.0,1048.0,58234567
2025-12-08,2317,135.5,138.0,134.0,137.5,12345678
2025-12-09,2330,1050.0,1055.0,1045.0,1052.0,45678901
```

## é‹ä½œåŸç†

```
é¦–æ¬¡åŸ·è¡Œ
â”œâ”€ æª¢æŸ¥è³‡æ–™æª”æ¡ˆ â†’ ä¸å­˜åœ¨
â”œâ”€ ç²å–æœ€è¿‘ 1 å¹´è³‡æ–™ (2025-01-01 ~ 2026-01-05)
â””â”€ å„²å­˜åˆ° data/taiwan_stocks.csv

ç¬¬äºŒæ¬¡åŸ·è¡Œ
â”œâ”€ æª¢æŸ¥è³‡æ–™æª”æ¡ˆ â†’ å­˜åœ¨ (æœ€æ—©: 2025-01-01)
â”œâ”€ å¾€å‰è£œå…… 1 å¹´ (2024-01-01 ~ 2024-12-31)
â””â”€ åˆä½µä¸¦å»é‡

ç¬¬ä¸‰æ¬¡åŸ·è¡Œ
â”œâ”€ æª¢æŸ¥è³‡æ–™æª”æ¡ˆ â†’ å­˜åœ¨ (æœ€æ—©: 2024-01-01)
â”œâ”€ ç¹¼çºŒå¾€å‰è£œå…… 1 å¹´
â””â”€ ...ç›´åˆ° 2000-01-01
```

## é æœŸè³‡æ–™é‡

å®Œæ•´ç²å– 2000-2026 å¹´çš„è³‡æ–™ï¼š

- **æ™‚é–“è·¨åº¦**: 26 å¹´ â‰ˆ 6,500 äº¤æ˜“æ—¥
- **è‚¡ç¥¨æ•¸é‡**: ç´„ 1,200 æ”¯ï¼ˆåƒ…ä¸Šå¸‚ï¼Œä¸å« ETFï¼‰
- **ç¸½è¨˜éŒ„æ•¸**: ç´„ 500 è¬ - 800 è¬æ¢
- **æª”æ¡ˆå¤§å°**: ç´„ 200-300 MB

## ä½¿ç”¨ API Tokenï¼ˆæ¨è–¦ï¼‰

ä½¿ç”¨ FinMind API Token å¯æå‡ 6 å€é€Ÿåº¦ã€‚

### ç²å– Token

1. å‰å¾€ [FinMind å®˜ç¶²](https://finmindtrade.com/) è¨»å†Š
2. ç™»å…¥å¾Œåœ¨å€‹äººä¸­å¿ƒç²å– API Token

### è¨­å®š Token

ç·¨è¼¯ `scripts/fetch_latest_stock_prices.py` ä¸»ç¨‹å¼ï¼Œä¿®æ”¹ `api_token` è®Šæ•¸ï¼š

```python
api_token = "YOUR_API_TOKEN_HERE"  # æ›¿æ›æˆä½ çš„ token
```

## å¸¸è¦‹å•é¡Œ

### Q1: éœ€è¦åŸ·è¡Œå¤šå°‘æ¬¡æ‰èƒ½å®Œæˆï¼Ÿ

ç´„ 25-26 æ¬¡ï¼ˆæ¯æ¬¡è£œå…… 1 å¹´ï¼Œå¾ç¾åœ¨åˆ° 2000 å¹´ï¼‰

### Q2: å¯ä»¥ä¸€æ¬¡ç²å–å…¨éƒ¨è³‡æ–™å—ï¼Ÿ

å¯ä»¥ï¼Œä½†ä¸æ¨è–¦ã€‚ç†ç”±ï¼š
- éœ€è¦ 5+ å°æ™‚é€£çºŒåŸ·è¡Œ
- å®¹æ˜“å› ç¶²è·¯å•é¡Œä¸­æ–·
- å¢é‡æ›´æ–°æ›´ç©©å®šå¯é 

### Q3: å¦‚ä½•ä¿®æ”¹ç›®æ¨™å¹´ä»½ï¼Ÿ

ç·¨è¼¯ `core/stock_fetcher.py` çš„ `TARGET_START_DATE` è®Šæ•¸ï¼š

```python
TARGET_START_DATE = "2000-01-01"  # æ”¹æˆä½ æƒ³è¦çš„æ—¥æœŸ
```

### Q4: è³‡æ–™æœƒè‡ªå‹•æ›´æ–°å—ï¼Ÿ

ç›®å‰è…³æœ¬è¨­è¨ˆç‚ºå„ªå…ˆè£œå……æ­·å²è³‡æ–™ã€‚ç•¶æ­·å²è³‡æ–™è£œå……å®Œç•¢å¾Œï¼Œæ¯æ¬¡åŸ·è¡Œæœƒè‡ªå‹•æ›´æ–°åˆ°ç•¶å‰æœ€æ–°æ—¥æœŸã€‚

### Q5: ç‚ºä»€éº¼æœ‰äº›è‚¡ç¥¨æ²’æœ‰å®Œæ•´è³‡æ–™ï¼Ÿ

- **æ–°ä¸Šå¸‚è‚¡ç¥¨**ï¼šä¸Šå¸‚æ™‚é–“æ™šæ–¼ 2000 å¹´
- **å·²ä¸‹å¸‚è‚¡ç¥¨**ï¼šFinMind å¯èƒ½ç„¡è³‡æ–™
- **æš«åœäº¤æ˜“**ï¼šæŸäº›æ—¥æœŸå¯èƒ½å› æ•…åœç‰Œ

### Q6: å¦‚ä½•æª¢æŸ¥è³‡æ–™æ˜¯å¦å®Œæ•´ï¼Ÿ

ä½¿ç”¨è³‡æ–™å®Œæ•´æ€§æª¢æŸ¥å·¥å…·ï¼š
```bash
./venv/bin/python3 scripts/check_missing_data.py --check-only
```

å·¥å…·æœƒç”¢ç”Ÿè©³ç´°å ±å‘Šï¼Œé¡¯ç¤ºæ¯æ”¯è‚¡ç¥¨çš„å®Œæ•´åº¦å’Œç¼ºå¤±å¤©æ•¸ã€‚

## è³‡æ–™å®Œæ•´æ€§æª¢æŸ¥

### åŠŸèƒ½èªªæ˜

`check_missing_data.py` å·¥å…·å¯ä»¥ï¼š
- åˆ†ææ¯æ”¯è‚¡ç¥¨çš„è³‡æ–™å®Œæ•´åº¦
- æ‰¾å‡ºæ‰€æœ‰ç¼ºå¤±çš„äº¤æ˜“æ—¥
- ç”¢ç”Ÿè©³ç´°çš„çµ±è¨ˆå ±å‘Š
- è‡ªå‹•è£œé½Šç¼ºå¤±çš„è³‡æ–™

### ä½¿ç”¨æ–¹å¼

```bash
# åƒ…æª¢æŸ¥ï¼ˆä¸è£œé½Šï¼‰
./venv/bin/python3 scripts/check_missing_data.py --check-only

# æª¢æŸ¥ä¸¦è£œé½Šæ‰€æœ‰ç¼ºå¤±è³‡æ–™
./venv/bin/python3 scripts/check_missing_data.py

# æ¸¬è©¦æ¨¡å¼ï¼ˆåªè£œé½Šå‰ N æ”¯è‚¡ç¥¨ï¼‰
./venv/bin/python3 scripts/check_missing_data.py --max-stocks 10

# æŒ‡å®šè³‡æ–™ç›®éŒ„
./venv/bin/python3 scripts/check_missing_data.py --output-dir data
```

### è¼¸å‡ºå ±å‘Š

åŸ·è¡Œå¾Œæœƒç”¢ç”Ÿå…©å€‹å ±å‘Šæª”æ¡ˆï¼š

1. **missing_data_report.csv** - çµ±è¨ˆå ±å‘Š
   - stock_id: è‚¡ç¥¨ä»£è™Ÿ
   - actual_days: å¯¦éš›æœ‰è³‡æ–™çš„å¤©æ•¸
   - missing_days: ç¼ºå¤±çš„å¤©æ•¸
   - completeness: å®Œæ•´åº¦ç™¾åˆ†æ¯”

2. **missing_data_detail.txt** - è©³ç´°æ˜ç´°
   - åˆ—å‡ºæ¯æ”¯è‚¡ç¥¨ç¼ºå¤±çš„å…·é«”æ—¥æœŸ
   - é¡¯ç¤ºç¼ºå¤±å¤©æ•¸å’Œç¯„ä¾‹æ—¥æœŸ

### æ³¨æ„äº‹é …

1. **ç¼ºå¤±è³‡æ–™çš„åŸå› **
   - è‚¡ç¥¨å°šæœªä¸Šå¸‚ï¼ˆæ–°ä¸Šå¸‚è‚¡ç¥¨ï¼‰
   - è‚¡ç¥¨å·²ä¸‹å¸‚
   - ä¼‘å¸‚æ—¥ï¼ˆåœ‹å®šå‡æ—¥ã€é¢±é¢¨å‡ç­‰ï¼‰
   - API æŠ“å–å¤±æ•—

2. **è£œé½Šç­–ç•¥**
   - åªè£œé½Šé€±ä¸€åˆ°é€±äº”çš„äº¤æ˜“æ—¥
   - è‡ªå‹•åˆä½µé€£çºŒæ—¥æœŸå€é–“ä»¥æ¸›å°‘ API è«‹æ±‚
   - é‡è¤‡è³‡æ–™æœƒè‡ªå‹•å»é‡

3. **æ€§èƒ½è€ƒé‡**
   - è£œé½Šå¤§é‡è³‡æ–™éœ€è¦è¼ƒé•·æ™‚é–“
   - å»ºè­°å…ˆç”¨ `--max-stocks` æ¸¬è©¦
   - å¯ä»¥åˆ†æ‰¹æ¬¡è£œé½Šè³‡æ–™

## é€²éšä½¿ç”¨

### åªç²å–ç‰¹å®šè‚¡ç¥¨

ä¿®æ”¹ `scripts/fetch_latest_stock_prices.py` ä¸­çš„ `prepare_stock_list` å‡½å¼ï¼š

```python
def prepare_stock_list(fetcher, test_mode):
    return ['2330', '2317', '2454']  # å°ç©é›»ã€é´»æµ·ã€è¯ç™¼ç§‘
```

### ä¿®æ”¹æ¯æ¬¡ç²å–çš„æ™‚é–“è·¨åº¦

ä¿®æ”¹ `core/stock_fetcher.py` ä¸­çš„ `calculate_fetch_ranges` å‡½å¼ï¼Œèª¿æ•´ `timedelta` çš„å¤©æ•¸ã€‚

### èª¿æ•´è«‹æ±‚å»¶é²

ä¿®æ”¹ `scripts/fetch_latest_stock_prices.py` ä¸­çš„ `fetch_all_ranges` å‡½å¼å‘¼å«ï¼š

```python
total_new = fetch_all_ranges(fetcher, stock_list, fetch_ranges, delay=1.0)
```

## å°ˆæ¡ˆçµæ§‹

```
stock-strategy/
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ fetch_latest_stock_prices.py          # è‚¡ç¥¨è³‡æ–™ç²å–ä¸»ç¨‹å¼
â”‚   â”œâ”€â”€ check_new_high.py        # ä¸‰å¹´æ–°é«˜æª¢æŸ¥å·¥å…·
â”‚   â””â”€â”€ check_missing_data.py    # è³‡æ–™å®Œæ•´æ€§æª¢æŸ¥å·¥å…·
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ stock_fetcher.py         # æ ¸å¿ƒæŠ“å–é‚è¼¯
â”‚   â””â”€â”€ line_sender.py           # Line é€šçŸ¥æ¨¡çµ„
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ install_service.sh       # Linux æœå‹™å®‰è£è…³æœ¬
â”‚   â”œâ”€â”€ uninstall_service.sh     # Linux æœå‹™å¸è¼‰è…³æœ¬
â”‚   â”œâ”€â”€ manage.sh                # æœå‹™ç®¡ç†è…³æœ¬
â”‚   â”œâ”€â”€ stock-fetcher.service    # è‚¡ç¥¨è³‡æ–™ç²å– service
â”‚   â”œâ”€â”€ stock-fetcher.timer      # è‚¡ç¥¨è³‡æ–™ç²å– timer
â”‚   â”œâ”€â”€ check-new-high.service   # æ–°é«˜æª¢æŸ¥ service
â”‚   â””â”€â”€ check-new-high.timer     # æ–°é«˜æª¢æŸ¥ timer
â”œâ”€â”€ data/                        # è³‡æ–™ç›®éŒ„ï¼ˆè‡ªå‹•ç”¢ç”Ÿï¼‰
â”‚   â”œâ”€â”€ taiwan_stocks.csv        # ä¸»è¦è³‡æ–™æª”æ¡ˆ
â”‚   â”œâ”€â”€ stock_list.json          # è‚¡ç¥¨åˆ—è¡¨å¿«å–
â”‚   â”œâ”€â”€ stock_list.csv           # è‚¡ç¥¨åˆ—è¡¨ï¼ˆCSVï¼‰
â”‚   â”œâ”€â”€ stock_list.txt           # è‚¡ç¥¨åˆ—è¡¨ï¼ˆTXTï¼‰
â”‚   â”œâ”€â”€ missing_data_report.csv  # è³‡æ–™å®Œæ•´æ€§å ±å‘Š
â”‚   â””â”€â”€ missing_data_detail.txt  # ç¼ºå¤±è³‡æ–™æ˜ç´°
â”œâ”€â”€ docs/                        # é …ç›®æ–‡ä»¶
â”œâ”€â”€ venv/                        # Python è™›æ“¬ç’°å¢ƒ
â”œâ”€â”€ requirements.txt             # ä¾è³´åˆ—è¡¨
â”œâ”€â”€ .env                         # ç’°å¢ƒè®Šæ•¸ï¼ˆéœ€è‡ªè¡Œå»ºç«‹ï¼‰
â””â”€â”€ README.md                    # æœ¬æ–‡ä»¶
```

## è³‡æ–™ä¾†æº

æœ¬å·¥å…·ä½¿ç”¨ [FinMind](https://finmindtrade.com/) API ç²å–è³‡æ–™ï¼š

- **å®˜æ–¹æ–‡ä»¶**: https://finmind.github.io/
- **è³‡æ–™ä¾†æº**: è‡ºç£è­‰åˆ¸äº¤æ˜“æ‰€ï¼ˆTWSEï¼‰
- **è³‡æ–™å“è³ª**: å°ˆæ¥­ç´šï¼Œå»£æ³›ç”¨æ–¼é‡åŒ–äº¤æ˜“

## æˆæ¬Šè²æ˜

- æœ¬å·¥å…·åƒ…ä¾›å­¸ç¿’å’Œç ”ç©¶ä½¿ç”¨
- è³‡æ–™ç‰ˆæ¬Šæ­¸è‡ºç£è­‰åˆ¸äº¤æ˜“æ‰€åŠ FinMind æ‰€æœ‰
- è«‹éµå®ˆ FinMind ä½¿ç”¨æ¢æ¬¾
- ä½¿ç”¨è³‡æ–™é€²è¡Œäº¤æ˜“éœ€è‡ªè¡Œæ‰¿æ“”é¢¨éšª

## å¾ŒçºŒæ‡‰ç”¨

ç²å–è³‡æ–™å¾Œï¼Œå¯ä»¥é€²è¡Œï¼š

1. **å›æ¸¬äº¤æ˜“ç­–ç•¥**: é©—è­‰æŠ€è¡“åˆ†ææŒ‡æ¨™çš„æœ‰æ•ˆæ€§
2. **çµ±è¨ˆåˆ†æ**: ç ”ç©¶è‚¡ç¥¨èµ°å‹¢ã€æ³¢å‹•ç‡ã€ç›¸é—œæ€§ç­‰
3. **æ©Ÿå™¨å­¸ç¿’**: è¨“ç·´è‚¡åƒ¹é æ¸¬æ¨¡å‹
4. **è³‡æ–™è¦–è¦ºåŒ–**: ç¹ªè£½Kç·šåœ–ã€è¶¨å‹¢åœ–ç­‰

## å­¸ç¿’è³‡æº

- Pandas æ•™å­¸: https://leemeng.tw/practical-pandas-tutorial-for-aspiring-data-scientists.html
- Pandas_ta æ•™å­¸: https://blog.csdn.net/ndhtou222/article/details/132157873
- ç”¨ Python å¯¦ä½œè²·è³£æŒ‡æ¨™: https://python.plainenglish.io/generating-buy-sell-trade-signals-in-python-1153b1a543c4
- FinMind å®˜æ–¹æ–‡ä»¶: https://finmind.github.io/
- FinMind ç­–ç•¥åˆ†æ: https://finmindtrade.com/analysis/#/dashboards/strategy-analysis

## æŠ€è¡“æ”¯æ´

- **å•é¡Œå›å ±**: [GitHub Issues](https://github.com/finmind/FinMind/issues)
- **FinMind æ–‡ä»¶**: https://finmind.github.io/
- **API ä½¿ç”¨**: https://finmindtrade.com/

## æ›´æ–°æ—¥èªŒ

### v3.0 (2026-01-06)

- âœ¨ **æ–°å¢ä¸‰å¹´æ–°é«˜æª¢æŸ¥åŠŸèƒ½** (`check_new_high.py`)
  - è‡ªå‹•æª¢æ¸¬è‚¡ç¥¨æ˜¯å¦å‰µä¸‰å¹´æ–°é«˜
  - Line å³æ™‚é€šçŸ¥æ¨é€
  - é¡¯ç¤ºè‚¡ç¥¨ä»£è™Ÿã€åç¨±ã€æ–°é«˜åƒ¹ã€å‰é«˜åƒ¹èˆ‡æ—¥æœŸ
- âœ¨ **è‡ªå‹•åŒ–éƒ¨ç½²å‡ç´š**
  - æ–°å¢ `check-new-high.service` å’Œ `check-new-high.timer`
  - æ¯å¤©ä¸‹åˆ 3:30 è‡ªå‹•æª¢æŸ¥æ–°é«˜
  - å®‰è£è…³æœ¬è‡ªå‹•å»ºç«‹è™›æ“¬ç’°å¢ƒ
- âœ¨ **Line é€šçŸ¥æ•´åˆ**
  - è‚¡ç¥¨è³‡æ–™ç²å–å®Œæˆé€šçŸ¥
  - ä¸‰å¹´æ–°é«˜å³æ™‚é€šçŸ¥
- ğŸ”§ **æ”¹å–„æœå‹™ç®¡ç†**
  - æ›´æ–° `install_service.sh` æ”¯æ´é›™æœå‹™å®‰è£
  - å„ªåŒ–æ—¥èªŒç®¡ç†å’ŒéŒ¯èª¤è™•ç†
- ğŸ“ **å®Œæ•´ README æ›´æ–°**
  - æ›´æ–°å°ˆæ¡ˆçµæ§‹èªªæ˜
  - æ–°å¢ Line Token è¨­å®šæ•™å­¸
  - æ›´æ–°ç®¡ç†å‘½ä»¤èªªæ˜

### v2.1 (2026-01-05)

- âœ¨ æ–°å¢è³‡æ–™å®Œæ•´æ€§æª¢æŸ¥å·¥å…· (`check_missing_data.py`)
- âœ¨ å¯¦ä½œè‚¡ç¥¨åˆ—è¡¨å¿«å–æ©Ÿåˆ¶ï¼ˆä¸€å¤©åªæŠ“å–ä¸€æ¬¡ï¼‰
- âœ¨ è‡ªå‹•è£œé½Šç¼ºå¤±è³‡æ–™åŠŸèƒ½
- ğŸ› ä¿®å¾©ã€Œç„¡æ³•ç²å–è‚¡ç¥¨åˆ—è¡¨ã€çš„éŒ¯èª¤
- ğŸ“ æ›´æ–° README æ–‡ä»¶ï¼Œæ–°å¢è™›æ“¬ç’°å¢ƒä½¿ç”¨èªªæ˜
- ğŸ”§ æ”¹å–„éŒ¯èª¤è™•ç†å’Œé™¤éŒ¯è³‡è¨Š

### v2.0 (2026-01-05)

- âœ¨ å¯¦ç¾å¢é‡æ›´æ–°åŠŸèƒ½
- âœ¨ è‡ªå‹•åµæ¸¬ç¾æœ‰è³‡æ–™ä¸¦çºŒå‚³
- âœ¨ æ™ºæ…§å»é‡å’Œè³‡æ–™åˆä½µ
- ğŸ”„ é‡æ§‹ç¨‹å¼ç¢¼çµæ§‹
- ğŸ“ å®Œå–„æ–‡ä»¶èªªæ˜

### v1.0

- åˆå§‹ç‰ˆæœ¬
- åŸºæœ¬è³‡æ–™ç²å–åŠŸèƒ½

---

**Made with â¤ï¸ for Taiwan Stock Traders**
